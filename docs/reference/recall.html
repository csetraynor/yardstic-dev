<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Calculate recall, precision and F values — recall • yardstick</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  <link href="../extra.css" rel="stylesheet">
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">yardstick</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/topepo/yardstick">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate recall, precision and F values</h1>
    </div>

    
    <p>These functions calculate the recall, precision or F values of
a measurement system for finding/retrieving relevant documents
compared to reference results (the truth regarding relevance).
The measurement and "truth" data must have the same two possible
outcomes and one of the outcomes must be thought of as a
"relevant" results.</p>
    

    <pre class="usage"><span class='fu'>recall</span>(<span class='no'>data</span>, <span class='no'>...</span>)

<span class='co'># S3 method for table</span>
<span class='fu'>recall</span>(<span class='no'>data</span>, <span class='no'>...</span>)

<span class='co'># S3 method for data.frame</span>
<span class='fu'>recall</span>(<span class='no'>data</span>, <span class='no'>truth</span>, <span class='no'>estimate</span>, <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='fu'>precision</span>(<span class='no'>data</span>, <span class='no'>...</span>)

<span class='co'># S3 method for data.frame</span>
<span class='fu'>precision</span>(<span class='no'>data</span>, <span class='no'>truth</span>, <span class='no'>estimate</span>, <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='co'># S3 method for table</span>
<span class='fu'>precision</span>(<span class='no'>data</span>, <span class='no'>...</span>)

<span class='fu'>f_meas</span>(<span class='no'>data</span>, <span class='no'>...</span>)

<span class='co'># S3 method for default</span>
<span class='fu'>f_meas</span>(<span class='no'>data</span>, <span class='no'>truth</span>, <span class='no'>estimate</span>, <span class='kw'>beta</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='co'># S3 method for table</span>
<span class='fu'>f_meas</span>(<span class='no'>data</span>, <span class='kw'>beta</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>For the default functions, a factor containing the
discrete measurements. For the <code>table</code> or <code>matrix</code>
functions, a table or matrix object, respectively, where the
true class results should be in the columns of the table.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Not currently used.</p></td>
    </tr>
    <tr>
      <th>truth</th>
      <td><p>The column identifier for the true class results
(that is a factor). This should an unquoted column name although
this argument is passed by expression and support
<a href='http://www.rdocumentation.org/packages/rlang/topics/quasiquotation'>quasiquotation</a> (you can unquote column
names or column positions).</p></td>
    </tr>
    <tr>
      <th>estimate</th>
      <td><p>The column identifier for the predicted class
results (that is also factor). As with <code>truth</code> this can be
specified different ways but the primary method is to use an
unquoted variable name.</p></td>
    </tr>
    <tr>
      <th>na.rm</th>
      <td><p>A logical value indicating whether <code>NA</code>
values should be stripped before the computation proceeds</p></td>
    </tr>
    <tr>
      <th>beta</th>
      <td><p>A numeric value used to weight precision and
recall. A value of 1 is traditionally used and corresponds to
the harmonic mean of the two values but other values weight
recall beta times more important than precision.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The recall (aka specificity) is defined as the proportion of
relevant results out of the number of samples which were
actually relevant. When there are no relevant results, recall is
not defined and a value of <code>NA</code> is returned.</p>
<p>The precision is percentage of predicted truly relevant results
of the total number of predicted relevant results and
characterizes the "purity in retrieval performance" (Buckland
and Gey, 1994).</p>
<p>The measure "F" is a combination of precision and recall (see
below).</p>
<p>There is no common convention on which factor level should
automatically be considered the relevant result.
In <code>yardstick</code>, the default is to use the <em>first</em> level. To
change this, a global option called <code>yardstick.event_first</code> is
set to <code>TRUE</code> when the package is loaded. This can be changed
to <code>FALSE</code> if the last level of the factor is considered the
level of interest.</p>
<p>Suppose a 2x2 table with notation</p><table><tr><td> </td>
<td> Reference </td>
<td> </td>
</tr><tr><td> Predicted </td>
<td> relevant </td>
<td>
Irrelevant </td>
</tr><tr><td> relevant </td>
<td> A </td>
<td> B </td>
</tr><tr><td> Irrelevant </td>
<td> C </td>
<td> D </td>
</tr></table>
    <p>The formulas used here are: $$recall = A/(A+C)$$ $$precision =
A/(A+B)$$ $$F_i = (1+i^2)*prec*recall/((i^2 * precision)+recall)$$</p>
<p>See the references for discussions of the statistics.</p>
<p>If more than one statistic is required, it is more
computationally efficient to create the confusion matrix using
<code><a href='conf_mat.html'>conf_mat()</a></code> and applying the corresponding <code>summary</code> method
(<code><a href='summary.conf_mat.html'>summary.conf_mat()</a></code>) to get the values at once.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Buckland, M., &amp; Gey, F. (1994). The relationship
between Recall and Precision. <em>Journal of the American Society
for Information Science</em>, 45(1), 12-19.</p>
<p>Powers, D. (2007). Evaluation: From Precision, Recall and F
Factor to ROC, Informedness, Markedness and Correlation.
Technical Report SIE-07-001, Flinders University</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='conf_mat.html'>conf_mat()</a></code>, <code><a href='summary.conf_mat.html'>summary.conf_mat()</a></code>, <code><a href='sens.html'>sens()</a></code>, <code><a href='mcc.html'>mcc()</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>data</span>(<span class='st'>"two_class_example"</span>)

<span class='co'># Different methods for calling the functions:</span>
<span class='fu'>precision</span>(<span class='no'>two_class_example</span>, <span class='kw'>truth</span> <span class='kw'>=</span> <span class='no'>truth</span>, <span class='kw'>estimate</span> <span class='kw'>=</span> <span class='no'>predicted</span>)</div><div class='output co'>#&gt; [1] 0.8194946</div><div class='input'>
<span class='fu'>recall</span>(<span class='no'>two_class_example</span>, <span class='kw'>truth</span> <span class='kw'>=</span> <span class='st'>"truth"</span>, <span class='kw'>estimate</span> <span class='kw'>=</span> <span class='st'>"predicted"</span>)</div><div class='output co'>#&gt; [1] 0.879845</div><div class='input'>
<span class='no'>truth_var</span> <span class='kw'>&lt;-</span> <span class='fu'>quote</span>(<span class='no'>truth</span>)
<span class='fu'>f_meas</span>(<span class='no'>two_class_example</span>, !! <span class='no'>truth_var</span>, <span class='no'>predicted</span>)</div><div class='output co'>#&gt; [1] 0.8485981</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Max Kuhn.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
